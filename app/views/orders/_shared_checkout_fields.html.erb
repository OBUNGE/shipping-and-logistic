<%# Shared Delivery + Payment fields for both cart and single product checkout %>

<h4 class="mt-4 fw-semibold text-secondary border-bottom pb-2">Delivery Information</h4>

<div class="row">
  <div class="col-md-6 mb-3">
    <%= f.label :first_name, "First Name", class: "form-label fw-semibold" %>
    <%= f.text_field :first_name, class: "form-control shadow-sm", required: true %>
  </div>
  <div class="col-md-6 mb-3">
    <%= f.label :last_name, "Last Name", class: "form-label fw-semibold" %>
    <%= f.text_field :last_name, class: "form-control shadow-sm", required: true %>
  </div>
</div>

<div class="col-md-6 mb-3">
  <%= f.label :email, "Email Address", class: "form-label fw-semibold" %>
  <%= f.email_field :email,
        value: (current_user&.email || ""),
        class: "form-control shadow-sm",
        placeholder: "e.g. guest@example.com",
        required: true %>
</div>

<div class="row">
  <div class="col-md-6 mb-3">
    <%= f.label :contact_number, "Delivery Contact Number", class: "form-label fw-semibold" %>
    <%= f.telephone_field :contact_number,
          value: (current_user&.phone || ""),
          class: "form-control shadow-sm",
          placeholder: "e.g. 2547XXXXXXXX",
          required: true %>
  </div>
  <div class="col-md-6 mb-3">
    <%= f.label :alternate_contact, "Alternate Contact (optional)", class: "form-label fw-semibold" %>
    <%= f.telephone_field :alternate_contact, class: "form-control shadow-sm", placeholder: "e.g. 2547XXXXXXXX" %>
  </div>
</div>

<div class="row">
  <div class="col-md-6 mb-3">
    <%= f.label :city, "City / Town", class: "form-label fw-semibold" %>
    <%= f.text_field :city, class: "form-control shadow-sm", required: true, id: "order_city" %>
  </div>
  <div class="col-md-6 mb-3">
    <%= f.label :country, "Country", class: "form-label fw-semibold" %>
    <%= f.select :country,
          options_for_select(["Kenya", "Uganda", "Tanzania", "Other"], f.object&.country || "Kenya"),
          {}, class: "form-select shadow-sm", required: true %>
  </div>
</div>

<div class="row">
  <div class="col-md-6 mb-3">
    <%= f.label :county, "County (Kenya only)", class: "form-label fw-semibold" %>
    <%= f.select :county,
          options_for_select(["Nairobi", "Mombasa", "Kisumu", "Nakuru", "Kiambu", "Machakos", "Uasin Gishu"], f.object&.county),
          { prompt: "Select County" },
          class: "form-select shadow-sm", id: "order_county" %>
  </div>
  <div class="col-md-6 mb-3">
    <%= f.label :region, "Region / State", class: "form-label fw-semibold" %>
    <%= f.text_field :region, class: "form-control shadow-sm", placeholder: "Enter your region" %>
  </div>
</div>

<div class="mb-3">
  <%= f.label :address, "Delivery Address", class: "form-label fw-semibold" %>
  <%= f.text_area :address, class: "form-control shadow-sm", rows: 3, required: true %>
</div>

<div class="mb-3">
  <%= f.label :delivery_notes, "Delivery Notes (optional)", class: "form-label fw-semibold" %>
  <%= f.text_area :delivery_notes, class: "form-control shadow-sm", rows: 2, placeholder: "Gate code, floor, landmark..." %>
</div>

<h4 class="mt-4 fw-semibold text-secondary border-bottom pb-2">Payment Method</h4>

<div class="form-check mb-3">
  <%= f.radio_button :provider, "mpesa", checked: true, class: "form-check-input", id: "provider_mpesa" %>
  <%= f.label :provider_mpesa, "Pay with M-PESA", class: "form-check-label fw-semibold" %>
</div>

<div class="mb-3" id="mpesa_phone_field">
  <%= f.label :phone_number, "M-PESA Phone Number", class: "form-label fw-semibold" %>
  <%= f.telephone_field :phone_number,
        value: (current_user&.phone || ""),
        class: "form-control shadow-sm",
        placeholder: "e.g. 2547XXXXXXXX",
        id: "mpesa_phone_number" %>
</div>

<div class="form-check mb-3">
  <%= f.radio_button :provider, "paypal", class: "form-check-input", id: "provider_paypal" %>
  <%= f.label :provider_paypal, "PayPal", class: "form-check-label fw-semibold" %>
</div>

<div class="form-check mb-3">
  <%= f.radio_button :provider, "paystack", class: "form-check-input", id: "provider_paystack" %>
  <%= f.label :provider_paystack, "Credit/Debit Card", class: "form-check-label fw-semibold" %>
</div>

<%# âœ… Jumia-style POD option: always rendered, JS handles enabling/disabling %>
<div class="form-check mb-3">
  <%= f.radio_button :provider, "pod", class: "form-check-input", id: "provider_pod" %>
  <%= f.label :provider_pod, "ðŸšš Pay on Delivery (Nairobi only)", class: "form-check-label fw-semibold text-success" %>
</div>

<div id="pod-note" class="text-muted small ms-4">
  ðŸš« Not available in your location. Please choose another payment method.
</div>

<h2>Update Shipment</h2>

<%= form_with model: [@order, @shipment], local: true do |f| %>
  <div class="mb-3">
    <%= f.label :carrier, class: "form-label" %>
    <%= f.select :carrier, Shipment.carriers.keys.map { |c| [c.titleize, c] } %>
  </div>

  <div class="mb-3">
    <%= f.label :tracking_number, class: "form-label" %>
    <%= f.text_field :tracking_number, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label :cost, class: "form-label" %>
    <%= f.number_field :cost, step: 0.01, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label :status, class: "form-label" %>
    <%= f.select :status, Shipment.statuses.keys.map { |s| [s.humanize, s] }, {}, class: "form-select" %>
  </div>

  <!-- Hidden fields to satisfy validations -->
  <%= f.hidden_field :first_name, value: @order.first_name %>
  <%= f.hidden_field :last_name,  value: @order.last_name %>
  <%= f.hidden_field :phone_number, value: (@order.contact_number.presence || @order.alternate_contact) %>
  <%= f.hidden_field :country, value: @order.country %>
  <%= f.hidden_field :city,    value: @order.city %>
  <%= f.hidden_field :address, value: @order.address %>

  <%= f.submit "Save Changes", class: "btn btn-primary" %>
<% end %>

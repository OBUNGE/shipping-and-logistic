<!-- Variant Template -->
<template id="variant-template">
  <div class="variant-block border p-3 mb-2 bg-light rounded" data-key="NEW_RECORD">
    <input type="hidden" name="product[variants_attributes][NEW_RECORD][_destroy]" class="destroy-flag" value="false">

    <div class="row g-2">
      <!-- Variant Type -->
      <div class="col-md-4">
        <label class="form-label small">Type</label>
        <select name="product[variants_attributes][NEW_RECORD][name]" class="form-select form-select-sm variant-type" required>
          <option value="">Select type</option>
          <option value="Color">Color</option>
          <option value="BagSize">Bag Size</option>
          <option value="ShoeSize">Shoe Size</option>
          <option value="BeltSize">Belt Size</option>
          <option value="Material">Material</option>
          <option value="Finish">Finish</option>
          <option value="Packaging">Packaging</option>
        </select>
      </div>

      <!-- Variant Value -->
      <div class="col-md-4">
        <label class="form-label small">Option</label>
        <select name="product[variants_attributes][NEW_RECORD][value]" class="form-select form-select-sm variant-value" required data-current="">
          <option value="">Select option</option>
        </select>
      </div>

      <!-- Price Modifier -->
      <div class="col-md-3">
        <label class="form-label small">Price Modifier</label>
        <input type="number"
               step="0.01"
               placeholder="e.g. 50.00"
               name="product[variants_attributes][NEW_RECORD][price_modifier]"
               class="form-control form-control-sm">
      </div>

      <!-- Delete Variant -->
      <div class="col-md-1 d-flex align-items-end">
        <button type="button" class="btn btn-sm btn-outline-danger delete-variant">Delete</button>
      </div>
    </div>

    <!-- ðŸŽ¨ Variant Images (only for Color) -->
    <div class="mt-2 color-image-actions d-none">
      <div class="variant-images-wrapper"></div>
      <button type="button" class="btn btn-sm btn-outline-secondary add-variant-image-btn">âž• Add Color Image</button>
    </div>
  </div>
</template>

<!-- Variant Image Template -->
<template id="variant-image-template">
  <div class="variant-image-block mb-2 border p-2 rounded bg-light">

    <!-- File input the user selects -->
    <input type="file"
           name="product[variants_attributes][INDEX][variant_images_attributes][NEW_IMAGE][image]"
           class="form-control form-control-sm"
           accept="image/*">

    <!-- Hidden field Rails will receive (preview blob URL) -->
    <input type="hidden"
           name="product[variants_attributes][INDEX][variant_images_attributes][NEW_IMAGE][image_url]"
           value="">

    <!-- Preview -->
    <img class="img-thumbnail mb-2 variant-image-preview"
         style="max-height:150px; display:none;">

    <!-- Delete button -->
    <button type="button"
            class="btn btn-sm btn-outline-danger delete-variant-image mt-1">
      Delete Image
    </button>

  </div>
</template>
